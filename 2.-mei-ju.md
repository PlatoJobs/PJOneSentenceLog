# 2.æšä¸¾

æœ¬ç¯‡æ–‡ç« å°†è®²è¿°Swiftä¸­å¾ˆå¸¸ç”¨çš„ä¹Ÿå¾ˆé‡è¦çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ ğŸ‘‰ `Enumæšä¸¾`ã€‚é¦–å…ˆä¼šä»‹ç»ä¸OCä¸­æšä¸¾çš„å·®åˆ«ï¼Œæ¥ç€ä¼šä»åº•å±‚åˆ†æ`Enum`çš„ä½¿ç”¨åœºæ™¯ï¼ŒåŒ…å«æšä¸¾çš„`åµŒå¥—`å’Œ`é€’å½’`ï¼Œ`ä¸OCçš„æ··ç¼–`çš„åœºæ™¯ï¼Œæœ€ååˆ†ææšä¸¾çš„`å†…å­˜å¤§å°`çš„è®¡ç®—æ–¹å¼ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒæ¡ã€‚

### ä¸€ã€OC&Swiftæšä¸¾çš„åŒºåˆ«

#### 1.1 OCä¸­çš„NS\_ENUM

OCä¸­çš„æšä¸¾å’ŒC/C++ä¸­çš„æšä¸¾åŸºæœ¬ä¸€æ ·ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ğŸ‘‡

* ä»…æ”¯æŒ`Intç±»å‹`ï¼Œé»˜è®¤`é¦–å…ƒç´ å€¼ä¸º0`ï¼Œåç»­å…ƒç´ å€¼`ä¾æ¬¡+1`
* `ä¸­é—´çš„å…ƒç´ `æœ‰èµ‹å€¼ï¼Œé‚£ä¹ˆ`ä»¥æ­¤èµ‹å€¼ä¸ºå‡†`ï¼Œåç»­`æ²¡èµ‹å€¼`çš„å…ƒç´ å€¼ä¾æ—§`ä¾æ¬¡+1` æšä¸¾ä½¿ç”¨ç¤ºä¾‹ä»£ç ğŸ‘‡

```text
typedef NS_ENUM(NSInteger, WEEK) {
    Mon,
    Tue = 10,
    Wed,
    Thu,
    Fri,
    Sat,
    Sun
};
// è°ƒç”¨ä»£ç ğŸ‘‡
WEEK a = Mon; 
WEEK b = Tue;
NSLog(@"a = %d, b = %d", (int)a, (int)b);
```

#### 1.2 Swiftä¸­çš„Enum

Swiftä¸­çš„æšä¸¾æ¯”OCçš„`å¼ºå¤§å¾ˆå¤š`ï¼å…¶ç‰¹ç‚¹å¦‚ä¸‹ğŸ‘‡

* æ ¼å¼ï¼š ä¸ç”¨é€—å·åˆ†éš”ï¼Œç±»å‹éœ€ä½¿ç”¨caseå£°æ˜
* å†…å®¹ï¼š
  1. æ”¯æŒ`Intã€Doubleã€String`ç­‰`åŸºç¡€ç±»å‹`ï¼Œä¹Ÿæœ‰`é»˜è®¤æšä¸¾å€¼`ï¼ˆ`Stringç±»å‹`é»˜è®¤æšä¸¾å€¼ä¸º`keyçš„åç§°`ï¼Œ`Intã€Double`æ•°å€¼å‹é»˜è®¤æšä¸¾å€¼ä¸º`0`å¼€å§‹`+1é€’å¢`
  2. æ”¯æŒ`è‡ªå®šä¹‰é€‰é¡¹` ğŸ‘‰ `ä¸æŒ‡å®š`æ”¯æŒ`ç±»å‹`ï¼Œå°±`æ²¡æœ‰rawValue`ï¼Œä½†åŒæ ·`æ”¯æŒcaseæšä¸¾`ï¼Œå¯`è‡ªå®šä¹‰å…³è”å†…å®¹`

> æ³¨æ„ï¼š`rawValue`åœ¨åé¢`æšä¸¾çš„è®¿é—®`ä¸­ä¼šè¯¦ç»†çš„è®²è§£ã€‚

ç¤ºä¾‹ä»£ç ğŸ‘‡

```text
// å†™æ³•ä¸€
// ä¸éœ€è¦é€—å·éš”å¼€
enum Weak1 {
    case MON
    case TUE
    case WED
    case THU
    case FRI
    case SAT
    case SUN
}

// å†™æ³•äºŒ
// ä¹Ÿå¯ä»¥ç›´æ¥ä¸€ä¸ªcaseï¼Œç„¶åä½¿ç”¨é€—å·éš”å¼€
enum Weak2 {
    case MON, TUE, WED, THU, FRI, SAT, SUN
}

// å®šä¹‰ä¸€ä¸ªæšä¸¾å˜é‡
var w: Weak1 = .MON
```

**1.2.2 è‡ªå®šä¹‰é€‰é¡¹ç±»å‹**

å¦‚æœåœ¨å£°æ˜æšä¸¾æ—¶`ä¸æŒ‡å®šç±»å‹`ï¼Œé‚£ä¹ˆå¯ç»™æšä¸¾é¡¹æ·»åŠ `æ‹“å±•å†…å®¹`\(å³`è‡ªå®šä¹‰ç±»å‹`\)ã€‚`switch-case`è®¿é—®æ—¶ï¼Œå¯å–å‡ºæ‹“å±•ç±»å‹è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚ä¾‹å¦‚ğŸ‘‡

```text
// è‡ªå®šä¹‰ç±»å‹çš„ä½¿ç”¨
enum Shape {
    case square(width: Double)
    case circle(radius: Double, borderWidth:Double)
}

func printValue(_ v: Shape) {
    // switchåŒºåˆ†case(ä¸æƒ³æ¯ä¸ªcaseå¤„ç†ï¼Œå¯ä½¿ç”¨default)
    switch v {
    case .square(let width):
        print(width)
    case .circle(let radius, _):
        print(radius)
    }
}

let s = Shape.square(width: 10)
let c = Shape.circle(radius: 20, borderWidth: 1)
printValue(s)
printValue(c)
```

![](.gitbook/assets/image%20%2830%29.png)

### äºŒã€Swiftæšä¸¾çš„ä½¿ç”¨

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹Swiftæšä¸¾çš„ä½¿ç”¨ï¼ŒåŒ…å«ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯çš„æƒ…å†µã€‚

#### 2.1 æšä¸¾çš„è®¿é—®

è¯´åˆ°æšä¸¾çš„è®¿é—®ï¼Œå°±å¿…é¡»å¾—æä¸€ä¸ªå…³é”®å­—`rawValue`ï¼Œä½¿ç”¨æ¡ˆä¾‹ğŸ‘‡

```text
enum Weak: String{
    case MON, TUE, WED, THU, FRI, SAT, SUN
}
var w = Weak.MON.rawValue
print(w)
```

è¿è¡Œç»“æœğŸ‘‡

![](.gitbook/assets/image%20%2823%29.png)

> æ³¨æ„ï¼šå¦‚æœenum`æ²¡æœ‰å£°æ˜ç±»å‹`ï¼Œæ˜¯`æ²¡æœ‰rawValue`å±æ€§çš„ğŸ‘‡

![](.gitbook/assets/image%20%2829%29.png)

ç°åœ¨é—®é¢˜æ¥äº† ğŸ‘‰ `rawValue`å¯¹åº”åœ¨åº•å±‚æ˜¯å¦‚ä½•åšåˆ°è¯»å–åˆ°`MON`å€¼çš„ï¼Ÿ

**rawValueçš„å–å€¼æµç¨‹**

è€è§„çŸ©ï¼Œæ‰¾å…¥å£ï¼Œä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯æŸ¥çœ‹SILï¼Œå½“ç„¶è¿™é‡Œä¹Ÿä¸ä¾‹å¤–ğŸ‘‡

`swiftc -emit-sil xx.swift | xcrun swift-demangle >> ./xx.sil && vscode xx.sil`

å…ˆçœ‹çœ‹æšä¸¾WeekğŸ‘‡

![](.gitbook/assets/image%20%2828%29.png)

æ¥ç€çœ‹çœ‹mainå‡½æ•°çš„æµç¨‹ğŸ‘‡

![](.gitbook/assets/image%20%2825%29.png)

æœ€åçœ‹çœ‹rawValueçš„getteræ–¹æ³•ğŸ‘‡

![](.gitbook/assets/image%20%2821%29.png)

ç„¶åçœ‹bb8ä»£ç æ®µğŸ‘‡

![](.gitbook/assets/image%20%2824%29.png)

è‡³æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨çŸ¥é“äº†ï¼Œ`rawValue`çš„åº•å±‚å°±æ˜¯è°ƒç”¨çš„`getteræ–¹æ³•`ï¼Œgetteræ–¹æ³•ä¸­`æ„é€ äº†å­—ç¬¦ä¸²`ï¼Œä½†æ˜¯è¿™ä¸ª`å­—ç¬¦ä¸²çš„å€¼`ï¼ˆä¾‹å¦‚â€œMONâ€ï¼‰ä»`å“ªé‡Œå–å‡º`çš„å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬èƒ½çŒœå‡ºæ¥ï¼Œåº”è¯¥æ˜¯åœ¨`ç¼–è¯‘æœŸç¡®å®š`äº†çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ‰“å¼€å·¥ç¨‹çš„execå¯æ‰§è¡Œæ–‡ä»¶ï¼ŒæŸ¥çœ‹`Mach-O`ğŸ‘‡  
  


![](.gitbook/assets/image%20%2822%29.png)

